# 如何准备地形高度图 - 新手指南

## 📋 什么是高度图？

高度图是一张**灰度图像**（黑白图），用来表示地形的高低：
- **白色/浅灰**：高的地方（山峰）
- **黑色/深灰**：低的地方（山谷）
- **中灰色**：中等高度（平原）

## 🎯 高度图要求

### 基本要求
- ✅ 格式：PNG 或 JPG
- ✅ 颜色：灰度图（黑白，不要彩色）
- ✅ 尺寸：推荐 256x256 或 512x512 像素
- ✅ 命名：建议命名为 `heightmap.png`
- ✅ 位置：放在 `8502_CrouseWork/Textures/` 文件夹

### 尺寸说明
| 尺寸 | 顶点数 | 三角形数 | 性能 | 细节 |
|------|--------|----------|------|------|
| 128x128 | 16,384 | 32,258 | 极快 | 低 |
| 256x256 | 65,536 | 130,050 | 快 | 中 ✅ |
| 512x512 | 262,144 | 524,034 | 中等 | 高 |
| 1024x1024 | 1,048,576 | 2,096,130 | 慢 | 极高 |

**推荐：256x256** - 性能和细节的最佳平衡

## 🛠️ 方法1：使用现成的高度图（最简单）

### 在线下载
1. 访问这些网站：
   - **Free Terrain Textures**: https://www.textures.com/
   - **Poly Haven**: https://polyhaven.com/hdris
   - 搜索：`free heightmap 256x256`

2. 下载灰度高度图
3. 重命名为 `heightmap.png`
4. 放到 `Textures/` 文件夹

## 🎨 方法2：使用图像编辑软件创建

### 使用 GIMP（免费软件）

#### 步骤1：创建新图像
1. 打开 GIMP
2. `文件` → `新建`
3. 宽度：256，高度：256
4. 点击"确定"

#### 步骤2：转为灰度模式
1. `图像` → `模式` → `灰度`

#### 步骤3：绘制地形
**方法A：使用云彩滤镜（自动生成）**
1. `滤镜` → `渲染` → `云彩` → `差值云彩`
2. 调整参数，点击"确定"
3. 效果：随机生成的丘陵地形

**方法B：手动绘画**
1. 选择画笔工具
2. 用白色画山峰（高的地方）
3. 用黑色画山谷（低的地方）
4. 用灰色画平原

#### 步骤4：模糊处理（可选）
1. `滤镜` → `模糊` → `高斯模糊`
2. 半径：5-10 像素
3. 目的：让地形过渡更平滑

#### 步骤5：导出
1. `文件` → `导出为`
2. 命名：`heightmap.png`
3. 保存位置：`8502_CrouseWork/Textures/`
4. 点击"导出"

### 使用 Photoshop

1. 新建文件：256x256，灰度模式
2. `滤镜` → `渲染` → `云彩`
3. 或使用画笔手动绘制
4. `文件` → `导出` → `导出为PNG`

## 🖼️ 方法3：使用在线工具

### Terrain Generator（网页工具）
1. 访问：http://terrain.party/
2. 选择真实地形区域（如山区）
3. 下载高度图
4. 在图像软件中调整为256x256

### GIMP在线版
1. 访问：https://www.photopea.com/（类似Photoshop的在线工具）
2. 按照上面GIMP的步骤操作

## 📝 方法4：使用代码生成（程序员方法）

### Python + Pillow
```python
from PIL import Image
import numpy as np

# 创建256x256的噪声高度图
size = 256
data = np.random.randint(0, 256, (size, size), dtype=np.uint8)

# 高斯模糊（让地形更平滑）
from scipy.ndimage import gaussian_filter
data = gaussian_filter(data, sigma=10)

# 保存为图像
img = Image.fromarray(data, mode='L')
img.save('heightmap.png')
```

## ✅ 验证高度图

### 检查清单
- [ ] 文件格式是 PNG 或 JPG
- [ ] 图像是灰度的（没有颜色）
- [ ] 尺寸是正方形（256x256）
- [ ] 文件在正确位置（`Textures/heightmap.png`）
- [ ] 文件不太大（< 1MB）

### 目视检查
用图像查看器打开高度图：
- ✅ 应该看到黑白灰的图案
- ❌ 不应该有彩色
- ✅ 亮的地方对应高处
- ✅ 暗的地方对应低处

## 🌾 准备草地纹理

除了高度图，你还需要一张草地纹理来贴在地形表面。

### 要求
- 格式：JPG 或 PNG
- 尺寸：512x512 或 1024x1024（可以更大）
- 内容：草地、泥土、岩石等
- 命名：`grass.jpg` 或 `grass.png`
- 位置：`Textures/` 文件夹

### 下载资源
- **Poly Haven**: https://polyhaven.com/textures
- **ambientCG**: https://ambientcg.com/
- **OpenGameArt**: https://opengameart.org/

搜索关键词：
- `grass texture`
- `ground texture`
- `terrain texture`

## 🚀 快速开始方案

如果你现在就想测试，可以使用**最简单的方法**：

### 创建简单测试高度图
1. 用画图软件（Windows自带的"画图"）
2. 新建 256x256 的图像
3. 用黑白灰随意涂画
4. 另存为 `heightmap.png`
5. 放到 `Textures/` 文件夹

### 使用纯色纹理
如果暂时没有草地纹理：
1. 用画图软件创建 512x512 的图像
2. 填充绿色（模拟草地）
3. 另存为 `grass.jpg`
4. 放到 `Textures/` 文件夹

## 📊 高度图示例说明

### 示例1：平坦地形
```
全图灰色（中灰）
结果：平坦的地面，没有起伏
```

### 示例2：简单山峰
```
中间白色，周围黑色
结果：中央有一座山，四周是低地
```

### 示例3：丘陵地形
```
随机的黑白灰斑点（云彩滤镜效果）
结果：起伏的丘陵，类似真实地形
```

## ❓ 常见问题

### Q1: 我的高度图是彩色的，可以用吗？
**A**: 可以，但STB_image会自动转为灰度。建议先在图像软件中转为灰度，这样你能预览最终效果。

### Q2: 高度图太模糊了怎么办？
**A**: 在图像软件中：
- `滤镜` → `锐化`
- 或增加对比度

### Q3: 地形太平了怎么办？
**A**: 增加 `HEIGHT_SCALE` 参数（在创建Terrain对象时）：
```cpp
Terrain terrain("Textures/heightmap.png", 100.0f, 20.0f);
//                                                    ↑
//                                            数值越大，山越高
```

### Q4: 地形太陡峭怎么办？
**A**: 减小 `HEIGHT_SCALE` 参数，或在图像软件中对高度图进行模糊处理。

### Q5: 我不想自己做，有没有现成的？
**A**: 可以！我可以帮你生成一个简单的测试高度图。运行代码时如果找不到高度图，程序会给出提示。

## 📁 最终文件结构

完成后，你的文件夹应该是这样的：

```
8502_CrouseWork/
└── Textures/
    ├── heightmap.png    ← 高度图（必需）
    ├── grass.jpg        ← 草地纹理（必需）
    └── test.jpg         ← 之前的测试纹理（保留）
```

## 🎉 下一步

高度图准备好后，就可以运行程序了！

在 `main.cpp` 中，我会添加这样的代码：
```cpp
Terrain terrain("Textures/heightmap.png");
```

程序会自动：
1. 加载高度图
2. 生成地形网格
3. 渲染带纹理的3D地形

准备好了吗？😊
